<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>LOYD</title>

<style>
body{
 margin:0;
 background:#000;
 font-family:-apple-system,BlinkMacSystemFont;
 color:#fff;
 display:flex;
 justify-content:center;
}

.phone{
 width:390px;
 height:844px;
 background:#0b0b0b;
 position:relative;
 overflow:hidden;
}

.header{
 padding:14px;
 font-weight:700;
 font-size:20px;
}

.story{
 display:flex;
 overflow-x:auto;
 padding:10px;
 gap:12px;
}

.story div{
 text-align:center;
 font-size:12px;
}

.story img{
 width:60px;
 height:60px;
 border-radius:50%;
 border:2px solid #ff3b82;
}

.feed{
 height:600px;
 overflow:auto;
 padding-bottom:100px;
}

.post{
 padding:14px;
 border-bottom:1px solid #222;
}

.post img{
 width:100%;
 border-radius:12px;
 margin-top:8px;
}

.bottom{
 position:absolute;
 bottom:0;
 width:100%;
 display:flex;
 justify-content:space-around;
 background:#111;
 padding:12px;
}

button{
 background:none;
 border:none;
 color:white;
 font-size:14px;
}

.writeBtn{
 position:absolute;
 right:20px;
 bottom:90px;
 background:#ff3b82;
 width:56px;
 height:56px;
 border-radius:50%;
 font-size:26px;
}

.modal{
 position:absolute;
 top:0;
 left:0;
 width:100%;
 height:100%;
 background:#000;
 display:none;
 flex-direction:column;
 padding:20px;
}
input,textarea{
 margin:8px 0;
 padding:10px;
 border-radius:8px;
 border:none;
}
</style>
</head>

<body>

<div class="phone">

<div class="header">LOYD</div>

<div id="home">

<div class="story" id="story"></div>

<div class="feed" id="feed"></div>

</div>

<button class="writeBtn" onclick="openWrite()">+</button>

<div class="bottom">
<button onclick="home()">홈</button>
<button onclick="openDM()">DM</button>
<button onclick="openNotice()">알림</button>
<button onclick="openProfile()">프로필</button>
</div>

<div id="writeModal" class="modal">
<h2>글쓰기</h2>
<textarea id="postText" placeholder="내용"></textarea>
<input id="imgUrl" placeholder="이미지 url">
<button onclick="submitPost()">등록</button>
<button onclick="closeWrite()">닫기</button>
</div>

<div id="profileModal" class="modal">
<h2>프로필</h2>
<input id="nick" placeholder="닉네임">
<input id="pfp" placeholder="프로필이미지">
<label>아티스트</label>
<input type="checkbox" id="artist">
<button onclick="saveProfile()">저장</button>
<button onclick="closeProfile()">닫기</button>
</div>

</div>

<script>

let user = JSON.parse(localStorage.getItem("user")) || {
 name:"user",
 pfp:"https://i.pravatar.cc/100",
 artist:false,
 followers:0
};

let posts = JSON.parse(localStorage.getItem("posts")) || [];

function save(){
 localStorage.setItem("posts",JSON.stringify(posts));
 localStorage.setItem("user",JSON.stringify(user));
}

function renderStories(){
 let s=document.getElementById("story");
 s.innerHTML=`
 <div>
  <img src="${user.pfp}">
  <div>${user.name}</div>
 </div>
 `;
}

function renderFeed(){
 let f=document.getElementById("feed");
 f.innerHTML="";
 posts.forEach((p,i)=>{
   f.innerHTML+=`
   <div class="post">
     <b>${p.author} ${p.artist?"✔️":""}</b>
     <p>${p.text}</p>
     ${p.img?`<img src="${p.img}">`:''}
     <div>
       <button onclick="like(${i})">공감 ${p.likes}</button>
       <button onclick="comment(${i})">댓글</button>
     </div>
   </div>
   `;
 });
}

function openWrite(){
 document.getElementById("writeModal").style.display="flex";
}
function closeWrite(){
 document.getElementById("writeModal").style.display="none";
}

function submitPost(){
 posts.unshift({
  author:user.name,
  artist:user.artist,
  text:postText.value,
  img:imgUrl.value,
  likes:0,
  comments:[]
 });
 save();
 renderFeed();
 closeWrite();
}

function like(i){
 posts[i].likes++;
 save();
 renderFeed();
}

function openProfile(){
 document.getElementById("profileModal").style.display="flex";
}
function closeProfile(){
 document.getElementById("profileModal").style.display="none";
}

function saveProfile(){
 user.name=nick.value;
 user.pfp=pfp.value;
 user.artist=artist.checked;
 save();
 renderStories();
 closeProfile();
}

function home(){}

renderStories();
renderFeed();

</script>

</body>
</html>

