<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roleplay Chat</title>
<style>
body{font-family:Arial;margin:0;background:#e5ddd5}
.phone{
 max-width:420px;
 margin:auto;
 background:white;
 height:100vh;
 display:flex;
 flex-direction:column;
 border:1px solid #ccc;
}
.notice{background:#f3f3f3;padding:10px;text-align:center;font-weight:bold}
.header{padding:10px;display:flex;gap:8px;flex-wrap:wrap;justify-content:center;border-bottom:1px solid #ddd}
.header button{padding:6px 12px;border:none;border-radius:20px;cursor:pointer}
.chat{flex:1;padding:15px;overflow-y:auto;background:#efeae2}
.message{display:flex;margin-bottom:12px}
.message.left{justify-content:flex-start}
.message.right{justify-content:flex-end}
.bubble{max-width:65%;padding:10px 14px;border-radius:16px}
.left .bubble{background:white}
.right .bubble{background:#8e1c1c;color:white}
.profile{display:flex;align-items:center;margin-right:6px;font-size:12px}
.profile img{width:32px;height:32px;border-radius:50%;margin-right:5px}
.inputBox{display:flex;border-top:1px solid #ddd;padding:10px}
.inputBox input{flex:1;padding:8px}
.settings{position:fixed;right:10px;top:10px;background:white;padding:12px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.1);display:none}
.dark{background:#111;color:white}
.dark .chat{background:#222}
.dark .left .bubble{background:#333;color:white}
.dark .right .bubble{background:#555}
</style>
</head>
<body>

<div class="phone">
<div class="notice" id="notice">ğŸ“¢ ê³µì§€: í™˜ì˜í•©ë‹ˆë‹¤</div>

<div class="header">
  <button onclick="setUser('SEORIN')">SEORIN</button>
  <button onclick="setUser('HARI')">HARI</button>
  <button onclick="setUser('ROSSY')">ROSSY</button>
  <button onclick="setUser('DANA')">DANA</button>
  <button onclick="toggleSettings()">âš™</button>
</div>

<div class="chat" id="chat"></div>

<div class="inputBox">
  <input id="msg" placeholder="ë©”ì‹œì§€ ì…ë ¥">
  <button onclick="sendMsg()">ì „ì†¡</button>
</div>
</div>

<div class="settings" id="settings">
  <h4>í”„ë¡œí•„ ì„¤ì •</h4>
  ì´ë¦„: <input id="nameInput"><br><br>
  í”„ì‚¬ URL: <input id="imgInput"><br><br>
  <button onclick="saveProfile()">ì €ì¥</button>
  <hr>
  <h4>ê³µì§€ ë³€ê²½ (ê´€ë¦¬ìë§Œ)</h4>
  <input id="noticeInput">
  <button onclick="changeNotice()">ê³µì§€ ì„¤ì •</button>
  <hr>
  <h4>í…Œë§ˆ</h4>
  <button onclick="setTheme('light')">í™”ì´íŠ¸</button>
  <button onclick="setTheme('dark')">ë‹¤í¬</button>
</div>

<script>
let currentUser = localStorage.getItem('currentUser') || 'SEORIN';
const adminUser = 'SEORIN';
let messages = JSON.parse(localStorage.getItem('messages') || '[]');

const users={
 SEORIN:{img:'https://i.pravatar.cc/40?img=1',badge:'â­'},
 HARI:{img:'https://i.pravatar.cc/40?img=2',badge:'ğŸ’'},
 ROSSY:{img:'https://i.pravatar.cc/40?img=3',badge:'âœ”'},
 DANA:{img:'https://i.pravatar.cc/40?img=4',badge:'ğŸ”¥'}
};

function renderChat(){
 const chat=document.getElementById('chat');
 chat.innerHTML='';
 messages.forEach(m=>{
  const wrap=document.createElement('div');
  const side = m.sender === currentUser ? 'right':'left';
  wrap.className='message '+side;

  if(side==='left'){
    wrap.innerHTML=`
      <div class='profile'>
        <img src='${users[m.sender].img}'>
        <div>${m.sender} ${users[m.sender].badge}</div>
      </div>
      <div class='bubble'>${m.text}</div>`;
  }else{
    wrap.innerHTML=`<div class='bubble'>${m.text}</div>`;
  }

  chat.appendChild(wrap);
 });
}
renderChat();

function setUser(name){
 currentUser=name;
 localStorage.setItem('currentUser',name);
 renderChat();
}

function sendMsg(){
 const text=document.getElementById('msg').value;
 if(!text) return;
 messages.push({sender:currentUser,text});
 localStorage.setItem('messages',JSON.stringify(messages));
 document.getElementById('msg').value='';
 renderChat();
}

function toggleSettings(){
 const s=document.getElementById('settings');
 s.style.display = s.style.display==='block'?'none':'block';
}

function saveProfile(){
 const name=document.getElementById('nameInput').value;
 const img=document.getElementById('imgInput').value;
 if(img){ users[currentUser].img=img; }
 alert('í”„ë¡œí•„ ì €ì¥ë¨');
 renderChat();
}

function changeNotice(){
 if(currentUser !== adminUser){ alert('ê´€ë¦¬ìë§Œ ë³€ê²½ ê°€ëŠ¥'); return; }
 const text=document.getElementById('noticeInput').value;
 document.getElementById('notice').innerText='ğŸ“¢ '+text;
 localStorage.setItem('notice',text);
}

function setTheme(t){
 if(t==='dark'){ document.body.classList.add('dark'); localStorage.setItem('theme','dark'); }
 else{ document.body.classList.remove('dark'); localStorage.setItem('theme','light'); }
}

const notice = localStorage.getItem('notice');
if(notice) document.getElementById('notice').innerText='ğŸ“¢ '+notice;
const theme = localStorage.getItem('theme');
if(theme==='dark') document.body.classList.add('dark');
</script>

</body>
</html>
