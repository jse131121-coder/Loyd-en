<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roleplay Chat</title>
<style>
body{font-family:Arial;margin:0;background:#f4f4f4;transition:0.3s}
.header{padding:10px;background:white;display:flex;gap:10px;justify-content:center;border-bottom:1px solid #ddd;flex-wrap:wrap}
.header button{padding:8px 14px;border:none;border-radius:20px;cursor:pointer}
.chat{padding:20px;height:65vh;overflow-y:auto}
.message{display:flex;margin-bottom:15px}
.message.left{justify-content:flex-start}
.message.right{justify-content:flex-end}
.bubble{max-width:60%;padding:10px 15px;border-radius:20px}
.left .bubble{background:white}
.right .bubble{background:#8e1c1c;color:white}
.profile{display:flex;align-items:center;margin-right:10px}
.profile img{width:35px;height:35px;border-radius:50%;margin-right:6px}
.inputBox{position:fixed;bottom:0;width:100%;background:white;padding:10px;border-top:1px solid #ddd}
.notice{background:#ffe9e9;padding:10px;text-align:center;font-weight:bold}
.settings{position:fixed;right:10px;top:10px;background:white;padding:12px;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.1);display:none}
.dark{background:#111;color:white}
.dark .bubble{background:#333;color:white}
.dark .left .bubble{background:#222}
</style>
</head>
<body>

<div class="notice" id="notice">ğŸ“¢ ê³µì§€: í™˜ì˜í•©ë‹ˆë‹¤</div>

<div class="header">
  <button onclick="setUser('SEORIN')">SEORIN</button>
  <button onclick="setUser('HARI')">HARI</button>
  <button onclick="setUser('ROSSY')">ROSSY</button>
  <button onclick="setUser('DANA')">DANA</button>
  <button onclick="toggleSettings()">âš™ ì„¤ì •</button>
</div>

<div class="chat" id="chat"></div>

<div class="inputBox">
  <input id="msg" placeholder="ë©”ì‹œì§€ ì…ë ¥" style="width:80%">
  <button onclick="sendMsg()">ì „ì†¡</button>
</div>

<div class="settings" id="settings">
  <h4>í”„ë¡œí•„ ì„¤ì •</h4>
  ì´ë¦„: <input id="nameInput"><br><br>
  í”„ì‚¬ URL: <input id="imgInput"><br><br>
  <button onclick="saveProfile()">ì €ì¥</button>
  <hr>
  <h4>ê³µì§€ ë³€ê²½ (ê´€ë¦¬ìë§Œ)</h4>
  <input id="noticeInput">
  <button onclick="changeNotice()">ê³µì§€ ì„¤ì •</button>
  <hr>
  <h4>í…Œë§ˆ</h4>
  <button onclick="setTheme('light')">í™”ì´íŠ¸</button>
  <button onclick="setTheme('dark')">ë‹¤í¬</button>
</div>

<script>
let currentUser = localStorage.getItem('currentUser') || 'SEORIN';
const adminUser = 'SEORIN';

const users={
 SEORIN:{img:'https://i.pravatar.cc/40?img=1',badge:'â­'},
 HARI:{img:'https://i.pravatar.cc/40?img=2',badge:'ğŸ’'},
 ROSSY:{img:'https://i.pravatar.cc/40?img=3',badge:'âœ”'},
 DANA:{img:'https://i.pravatar.cc/40?img=4',badge:'ğŸ”¥'}
};

function loadSettings(){
 const theme = localStorage.getItem('theme');
 if(theme==='dark') document.body.classList.add('dark');
 const notice = localStorage.getItem('notice');
 if(notice) document.getElementById('notice').innerText='ğŸ“¢ '+notice;
}
loadSettings();

function setUser(name){
 currentUser=name;
 localStorage.setItem('currentUser',name);
 alert(name+' ì‹œì  ì „í™˜');
}

function sendMsg(){
 const text=document.getElementById('msg').value;
 if(!text) return;
 const chat=document.getElementById('chat');
 const wrap=document.createElement('div');
 wrap.className='message right';
 wrap.innerHTML=`<div class='bubble'>${text}</div>`;
 chat.appendChild(wrap);
 document.getElementById('msg').value='';
}

function receiveMsg(sender,text){
 const chat=document.getElementById('chat');
 const wrap=document.createElement('div');
 wrap.className='message left';
 wrap.innerHTML=`
 <div class='profile'>
  <img src='${users[sender].img}'>
  <div>${sender} ${users[sender].badge}</div>
 </div>
 <div class='bubble'>${text}</div>`;
 chat.appendChild(wrap);
}

function toggleSettings(){
 const s=document.getElementById('settings');
 s.style.display = s.style.display==='block'?'none':'block';
}

function saveProfile(){
 const name=document.getElementById('nameInput').value;
 const img=document.getElementById('imgInput').value;
 if(name){ currentUser=name; localStorage.setItem('currentUser',name); }
 if(img){ users[currentUser].img=img; localStorage.setItem('profileImg',img); }
 alert('í”„ë¡œí•„ ì €ì¥ë¨');
}

function changeNotice(){
 if(currentUser !== adminUser){ alert('ê´€ë¦¬ìë§Œ ë³€ê²½ ê°€ëŠ¥'); return; }
 const text=document.getElementById('noticeInput').value;
 document.getElementById('notice').innerText='ğŸ“¢ '+text;
 localStorage.setItem('notice',text);
}

function setTheme(t){
 if(t==='dark'){ document.body.classList.add('dark'); localStorage.setItem('theme','dark'); }
 else{ document.body.classList.remove('dark'); localStorage.setItem('theme','light'); }
}
</script>

</body>
</html>
